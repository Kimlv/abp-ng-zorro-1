<h3 class="modal-header">
    <span>{{'ChangePassword' | localize}}</span>
</h3>
<form nz-form #changePasswordModalForm="ngForm" (ngSubmit)="save()">
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="CurrentPassword">{{'CurrentPassword' | localize}}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback>
            <input nz-input name="CurrentPassword" #currentPasswordInput="ngModel" [(ngModel)]="currentPassword"
                placeholder="{{'CurrentPassword' | localize}}" type="password" required>
            <nz-form-explain *ngIf="currentPasswordInput.dirty && currentPasswordInput.errors">
                <validation-messages [formCtrl]="currentPasswordInput"></validation-messages>
            </nz-form-explain>
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="NewPassword">{{'NewPassword' | localize}}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback>
            <input nz-input name="NewPassword" #NewPasswordInput="ngModel" [(ngModel)]="password" placeholder="{{'NewPassword' | localize}}"
                type="password" validateEqual="NewPasswordRepeat" reverse="true" [requireDigit]="passwordComplexitySetting.requireDigit"
                [requireLowercase]="passwordComplexitySetting.requireLowercase" [requireUppercase]="passwordComplexitySetting.requireUppercase"
                [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric" [requiredLength]="passwordComplexitySetting.requiredLength"
                required>
            <nz-form-explain *ngIf="!NewPasswordInput.valid && !NewPasswordInput.pristine">
                <ul *ngIf="NewPasswordInput.errors">
                    <li [hidden]="!NewPasswordInput.errors.requireDigit">{{"PasswordComplexity_RequireDigit_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordInput.errors.requireLowercase">{{"PasswordComplexity_RequireLowercase_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordInput.errors.requireUppercase">{{"PasswordComplexity_RequireUppercase_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordInput.errors.requireNonAlphanumeric">{{"PasswordComplexity_RequireNonAlphanumeric_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordInput.errors.requiredLength">{{"PasswordComplexity_RequiredLength_Hint" | localize:passwordComplexitySetting.requiredLength}}</li>
                </ul>
            </nz-form-explain>
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="NewPasswordRepeat">{{'NewPasswordRepeat' | localize}}</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzHasFeedback>
            <input nz-input name="NewPasswordRepeat" #NewPasswordRepeatInput="ngModel" [(ngModel)]="confirmPassword"
                placeholder="{{'NewPasswordRepeat' | localize}}" type="password" validateEqual="NewPassword" [requireDigit]="passwordComplexitySetting.requireDigit"
                [requireLowercase]="passwordComplexitySetting.requireLowercase" [requireUppercase]="passwordComplexitySetting.requireUppercase"
                [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric" [requiredLength]="passwordComplexitySetting.requiredLength"
                reverse="false" required>
            <nz-form-explain *ngIf="!NewPasswordRepeatInput.valid && !NewPasswordRepeatInput.pristine">
                <ul *ngIf="NewPasswordRepeatInput.errors">
                    <li [hidden]="!NewPasswordRepeatInput.errors.requireDigit">{{"PasswordComplexity_RequireDigit_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordRepeatInput.errors.requireLowercase">{{"PasswordComplexity_RequireLowercase_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordRepeatInput.errors.requireUppercase">{{"PasswordComplexity_RequireUppercase_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordRepeatInput.errors.requireNonAlphanumeric">{{"PasswordComplexity_RequireNonAlphanumeric_Hint" | localize}}</li>
                    <li [hidden]="!NewPasswordRepeatInput.errors.requiredLength">{{"PasswordComplexity_RequiredLength_Hint" | localize:passwordComplexitySetting.requiredLength}}</li>
                    <li [hidden]="NewPasswordRepeatInput.valid">{{"PasswordsDontMatch" | localize}}</li>
                </ul>
            </nz-form-explain>
        </nz-form-control>
    </nz-form-item>

    <div class="modal-footer">
        <button nz-button type="button" [disabled]="saving" (click)="close()">
            {{"Cancel" | localize}}
        </button>
        <button nz-button [nzType]="'primary'" type="submit" [disabled]="!changePasswordModalForm.form.valid || saving" [nzLoading]="saving">
            <i nz-icon type="save"></i> {{"Save" | localize}}
        </button>
    </div>
</form>